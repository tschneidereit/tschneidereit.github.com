
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Till Schneidereit</title>
  <meta name="author" content="Till Schneidereit">

  
  <meta name="description" content="Not only is Sublime Text 2 a fabulous code editor &ndash; it also works very well as an editor for shell commands. At least for me, a major use-case &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://tschneidereit.github.io">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/feed/" rel="alternate" title="Till Schneidereit" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-10759382-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Till Schneidereit</a></h1>
  
    <h2>Virtualizing machines since not that long</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/feed/" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:tschneidereit.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about/">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2012/05/14/editing-git-commit-messages-with-sublime-text-2/">Editing Git and Mercurial Commit Messages With Sublime Text 2</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-05-14T01:37:00+02:00" pubdate data-updated="true">May 14<span>th</span>, 2012</time>
        
         | <a href="/2012/05/14/editing-git-commit-messages-with-sublime-text-2/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Not only is <a href="http://www.sublimetext.com/">Sublime Text 2</a> a fabulous code editor &ndash; it also works very well as an editor for shell commands.</p>

<p>At least for me, a major use-case for invoking an editor from the shell is editing commit messages in <a href="http://git-scm.com/">Git</a> and <a href="http://mercurial.selenic.com/">Mercurial</a>. Now simply setting <code>sub</code>, the shell command for invoking Sublime Text 2, as Git&rsquo;s or Mercurial&rsquo;s editor won&rsquo;t work for that: sub returns immediately instead of waiting for the commit message to be written and saved.</p>

<p>Enter <code>sub --wait</code>. With the <code>--wait</code> (or <code>-w</code>) argument, <code>sub</code> doesn&rsquo;t return until the file has been closed. The beauty of it is that it&rsquo;s not necessary to close the entire application: as soon as the <code>sub</code>-opened file is closed, <code>sub</code> returns <em>and the terminal window is focused again</em>!</p>

<h2>Wow, cool! But how?</h2>

<p>While I don&rsquo;t know a thing about how <code>sub</code> does this, I <em>do</em> know how to set things to use it.</p>

<p>For Git, run the following command:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git config --global core.editor "sub --wait"</span></code></pre></td></tr></table></div></figure>


<p>For Mercurial, edit the file <code>~/.hgrc</code> and add the following line under <code>[ui]</code>:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>editor = sub --wait</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2012/05/09/setting-up-cdt-to-work-on-spidermonkey/">Setting Up Eclipse CDT To Work On SpiderMonkey</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-05-09T14:01:00+02:00" pubdate data-updated="true">May 9<span>th</span>, 2012</time>
        
         | <a href="/2012/05/09/setting-up-cdt-to-work-on-spidermonkey/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>Note: This text has since been <a href="https://developer.mozilla.org/en/SpiderMonkey/Setting_up_CDT_to_work_on_SpiderMonkey">added to MDN</a>, so that version is very likely to be more up-to-date than this one, depending on when you&rsquo;re reading this.</em></p>

<p>The version of <a href="http://wiki.eclipse.org/CDT/">Eclipse&rsquo;s CDT</a> that&rsquo;s will be released with the <a href="">next major release of Eclipse, codenamed &ldquo;Juno&rdquo;</a>, has <a href="http://wiki.eclipse.org/CDT/User/NewIn81">some pretty decent features</a> that make it an attractive environment to work in.</p>

<p>Over at the <a href="https://developer.mozilla.org/">Mozilla Developer Network</a>, there&rsquo;s a guide for setting up CDT to work with the Mozilla codebase. As that guide is a bit outdated and doesn&rsquo;t cover setting things up for just SpiderMonkey instead of the whole Mozilla codebase, here&rsquo;s a short-ish guide for doing just that:</p>

<h2>Step 1 &ndash; Preparing a SpiderMonkey build</h2>

<p>For CDT to index all code, SpiderMonkey has to be built with debug information. The full process of and requisites for doing so are described <a href="https://developer.mozilla.org/en/Building_only_SpiderMonkey#Advanced_build">on MDN</a>. Please follow those instructions up until the point of invoking <code>configure</code>.</p>

<p>I prefer building with clang, so my modified build commands look like this:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mkdir _DBG.OBJ
</span><span class='line'>cd _DBG.OBJ
</span><span class='line'>CC='clang -Qunused-arguments -fcolor-diagnostics' CXX='clang++ -Qunused-arguments -fcolor-diagnostics' ../configure --enable-debug --disable-optimize --enable-debug-symbols</span></code></pre></td></tr></table></div></figure>


<p><em>Note: due to <a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=378984">a bug in CDT</a>, it&rsquo;s currently not possible (or at least not straight-forward) to build with ccache. See Step 4 below for a workaround.</em></p>

<h2>Step 2 &ndash; Installing Eclipse and Setting Up the Project</h2>

<p>The following run-down is a condensed and updated version of what&rsquo;s explained in much more detail on MDN <a href="https://developer.mozilla.org/en/Eclipse_CDT">for the entire Mozilla codebase</a>. Luckily, improvements in CDT have reduced the basic process to a manageable 10 steps:</p>

<ol>
<li>Download and extract &ldquo;Eclipse IDE for C/C++ Developers&rdquo; from the <a href="http://www.eclipse.org/downloads/index-developer.php">Eclipse Developer builds</a></li>
<li>Download the latest snapshot of the CDT from <a href="https://hudson.eclipse.org/hudson/job/cdt-sd90/">Eclipse&rsquo;s CI server</a> <em>without extracting the contents</em></li>
<li>Start Eclipse and create a workspace somewhere</li>
<li>Select &ldquo;Install New Software&hellip;&rdquo; from the &ldquo;Help&rdquo; menu</li>
<li>Click the &ldquo;Add&hellip;&rdquo; button in the upper right to add a repository, then click on &ldquo;Archive&hellip;&rdquo; and select the CDT snapshot (use &ldquo;sd90-snapshot&rdquo; or something similar as the name)</li>
<li>Select &ldquo;C/C++ Development Tools&rdquo; from &ldquo;CDT Main Features&rdquo; and whatever you want from &ldquo;CDT Optional Features&rdquo; and click &ldquo;Next&rdquo; and agree to licenses and installing unsigned packages and all that jazz until you&rsquo;re prompted to restart</li>
<li>Restart Eclipse</li>
<li>Back in Eclipse, select &ldquo;New > Makefile Project with Existing Code&rdquo; from the &ldquo;File&rdquo; menu</li>
<li>Give the project a name you like (&ldquo;SpiderMonkey&rdquo; has a nice ring to it) and use the &ldquo;Browser&hellip;&rdquo; button to select your checkout&rsquo;s <code>js/src</code> folder for the &ldquo;Existing Code Location&rdquo;</li>
<li> Choose the correct toolchain for your platform (i.e. MacOSX GCC on Mac) and click &ldquo;Finish&rdquo;</li>
</ol>


<p>At this point, the indexer starts running and already produces a pretty decent index of much of SpiderMonkey. Still, there are a quite a few things that CDT doesn&rsquo;t pick up yet: For everything to be indexed, CDT has to be aware of the project&rsquo;s build details.</p>

<h2>Step 3 &ndash; Index All the Code</h2>

<p>To let CDT know about the build, it has to invoke make itself (or, as is done in the guide for the whole Mozilla codebase on MDN, read a log of the build). This can be setup in another set of decently simple steps:</p>

<ol>
<li>Open the project&rsquo;s properties by selecting its root and clicking &ldquo;Properties&rdquo; in the &ldquo;File&rdquo; menu and select &ldquo;C/C++ Build&rdquo;</li>
<li>Under &ldquo;Builder Settings&rdquo;, deactivate &ldquo;Use default build command&rdquo;</li>
<li>Instead, change &ldquo;Build command&rdquo; to read <code>make -w</code> (this is required because CDT needs detailed information about which directories <code>make</code> operates on, which using <code>-w</code> causes <code>make</code> to provide)</li>
<li>Change the &ldquo;Build location&rdquo; to the build directory configured in step 1. For me, that means changing &ldquo;Build directory&rdquo; to read <code>${workspace_loc:/SpiderMonkey/_DBG.OBJ}</code></li>
<li>Under &ldquo;Behavior&rdquo;, make sure that &ldquo;Enable parallel build&rdquo; is <em>deactivated</em>, as CDT&rsquo;s indexer will freak out otherwise</li>
<li>Remove &ldquo;all&rdquo; from &ldquo;Build (Incremental build)&rdquo;</li>
<li>Deactivate &ldquo;Clean&rdquo; so that your builds don&rsquo;t take ages</li>
<li>If you&rsquo;re using clang, <a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=378981">a bug in CDT</a> requires changing one more setting: in the project&rsquo;s &ldquo;C/C++ General &ndash;> Preprocessor Include
Paths, Macros etc.&rdquo; settings panel, select the &ldquo;Providers&rdquo; tab, then select &ldquo;CDT GCC Build Output Parser&rdquo; and change the content of the &ldquo;Compiler command pattern&rdquo; input field to read <code>(gcc)|([gc]\+\+)|(clang)</code></li>
<li>Start the build by selecting &ldquo;Build All&rdquo; from the &ldquo;Project&rdquo; menu</li>
<li>Start the indexer by selecting &ldquo;Index > Rebuild&rdquo; from the project&rsquo;s context menu</li>
</ol>


<p>And that&rsquo;s pretty much it: Large parts of SpiderMonkey should now be indexed. Unfortunately, there are also large parts that aren&rsquo;t properly indexed, leading to errors and warnings being shown for perfectly valid code, but I find that the parts that <em>do</em> work do so nicely enough to make it totally worth it.</p>

<p>That leaves us with only one thing to do:</p>

<h2>Step 4 &ndash; Speeding It Up</h2>

<p>As mentioned above, CDT doesn&rsquo;t like ccache for some reason. Until <a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=378984">that bug</a> is fixed, a somewhat simple workaround is to hide the usage of ccache by wrapping it with shell scripts for <code>gcc</code>/<code>g++</code> and <code>clang</code>/<code>clang++</code>, respectively. I use clang, so I put two scripts into <code>/usr/local/bin/</code>:</p>

<h3>cclang:</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#!/bin/bash
</span><span class='line'>/usr/local/bin/ccache /usr/local/bin/clang $@</span></code></pre></td></tr></table></div></figure>


<h3>cclang++:</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#!/bin/bash
</span><span class='line'>/usr/local/bin/ccache /usr/local/bin/clang++ $@</span></code></pre></td></tr></table></div></figure>


<p>After a quick <code>chmod u+x /usr/local/bin/cclang*</code>, use the following configure command to start working with ccache after all:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>CC='cclang -Qunused-arguments -fcolor-diagnostics' CXX='cclang++ -Qunused-arguments -fcolor-diagnostics' ../configure --enable-debug --disable-optimize --enable-debug-symbols</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2011/12/13/on-beginnings/">On Beginnings</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-12-13T15:06:00+01:00" pubdate data-updated="true">Dec 13<span>th</span>, 2011</time>
        
         | <a href="/2011/12/13/on-beginnings/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>On December 31, 1995, Calvin and Hobbes <a href="http://www.gocomics.com/calvinandhobbes/1995/12/31">boarded their sled and took off</a> into the blank canvas that to them was the stark white, freshly snow-covered scenery.</p>

<p>That&rsquo;s not what this post is about. At least in part, it is, however, about endings. Just as that last comic strip Bill Watterson ever published.</p>

<p>In the fall of 1999, I discovered this fantastic little tool called Macromedia Flash 4. To cut a long and boring story short, the result was that instead of going to university, I immediately kicked off my career as a professional web developer in the advertising industry. While in hindsight, that claim of professionalism was bordering on the ridiculous in its utter optimism and naïveté, the good news is: it somehow worked and while I did start university a year later, it had to take a back seat to my main occupation.</p>

<p>Now, twelve years on, it seems like not that much has changed. Granted: I spent the last five years not only developing but also managing teams and doing conceptual work. Still, at the core of things, I am what I was all those years ago &ndash; a web developer.</p>

<p>As you might have guessed, though, the real changes are a bit more subtle. As time went on, I became more and more aware of two important facts: first, neither my talents nor my interests really lie in the frontend; second, twelve years of doing advertising is enough for a lifetime.</p>

<p>Don&rsquo;t get me wrong: I don&rsquo;t have any deeply-rooted problem with advertising in and of itself. I do, however, think that there&rsquo;s a fundamental problem with projects in the advertising industry: they lack real stakeholders. Now I might be completely off the mark here, but that was my overarching impression in almost all the projects I was ever involved in and it makes a lot of sense to me, too: the companies you work for in advertising have their stakes in their products, not really in marketing them.</p>

<p>Whether I&rsquo;m right about this doesn&rsquo;t really matter, though: real or imagined, this gap I experience is enough of a problem for me that I want to change what I&rsquo;m working on.</p>

<p>The other part of the equation is that I enjoy building systems, applications and frameworks, not microsites. The projects I enjoy the most are along the lines of <a href="http://robotlegs.org">Robotlegs</a>, <a href="http://github.com/tschneidereit/SwiftSuspenders">Swiftsuspenders</a> and <a href="http://github.com/reprise/reprise-framework">Reprise</a> &ndash; an MVC framework, an IoC container and a CSS-based layout and components framework. Building a CMS abstraction layer to be used by the hundreds of agencies building modules and microsites for the <a href="http://www.nivea.com/">NIVEA website</a> was pretty neat, too.</p>

<p>For these reasons, I have decided to close my current business as the tech lead of a small team of sub-contractors to advertising agencies at year&rsquo;s end.</p>

<p>As of January 2012, I will do some exploring of a blank canvas of my own and be available for bookings as a freelancing developer specialized in building systems, renderers and complex applications. I&rsquo;m perfectly capable of doing and will do the occasional frontend programming if an otherwise perfect job requires it, but as said above, I strongly believe that my real talents lie a bit deeper down the stack. If that sounds like something your company could use and you&rsquo;re either located in Germany or could include me working remotely then please do get in touch!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2011/10/23/flash-cs5-and-version-control-of-binary-data-and-wasted-bandwidth/">Flash >= CS5 and version control: Of binary data and wasted bandwidth</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-10-23T17:05:27+02:00" pubdate data-updated="true">Oct 23<span>rd</span>, 2011</time>
        
         | <a href="/2011/10/23/flash-cs5-and-version-control-of-binary-data-and-wasted-bandwidth/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>With the advent of Flash CS5, Adobe switched the format of <code>.fla</code>
files from the quirky binary format it was in previous editions to what every
self-respecting developer of document-creation tools uses nowadays: A
compressed archive consisting of an XML file (the actual document) and lots of
additional files.</p>

<p>This in itself would be pretty nice, what with enabling third-party tooling
and all. What I want to get at, though, is that they were nice enough to also
enable working with those same documents saved as an uncompressed folder:
Choosing <code>Flash CS5 Uncompressed Document (*.XFL)</code> as the file format
when saving a project causes a folder with the project&rsquo;s name to be created.
Inside this folder is everything that would normally be contained in the
<code>.fla</code>:</p>

<ul>
<li>The file <code>DOMDocument.xml</code>, which is the equivalent of the .fla file without any embedded assets or settings</li>
<li>The file <code>PublishSettings.xml</code>, which contains exactly what you think it does</li>
<li>The file <code>MobileSettings.xml</code>, which also contains exactly what you think it does</li>
<li>The file <code>META-INF/metadata.xml</code>, containing the documents&rsquo;s creation and change history</li>
<li>The folder <code>LIBRARY</code>, which contains the documents library, neatly structured in the same way as your library itself, but with additional folders for binary assets, such as BMPs</li>
<li>The folder <code>bin</code>, which contains cached versions of the binary assets, pre-converted to their output representations as compiled into the published SWF</li>
</ul>


<p>The beauty of this setup is that you can work with all these different files
just as you would with any other text or binary files: You can edit the XML
files in your editor of choice, replace images with newer versions you get
from your designer or use your diff and merge tools on them.</p>

<p>This last part is the most important to me: By replacing your <code>.fla</code>
files with <code>XFL</code> folders, you allow them to be version controlled in
a sane way. Instead of forcing your VCS to deal with incomprehensible blobs of
binary data, hoping that it will make the best of it, you allow it to live up
to all the hype about its efficiency and speed that caused you to use it in
the first place.</p>

<p>One last tip on that: Use whatever means your VCS provides to exclude the
<code>*.dat</code> files in the <code>bin</code> folder from versioning. They&rsquo;re
really simple caches that get re-created if missing.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2011/10/22/mario-mushroom-now-with-80-less-awesome/">Mario Mushroom: Now with 80% less awesome</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-10-22T14:34:04+02:00" pubdate data-updated="true">Oct 22<span>nd</span>, 2011</time>
        
         | <a href="/2011/10/22/mario-mushroom-now-with-80-less-awesome/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><strong>tl;dr:</strong>
Don&rsquo;t use the Mario Mushroom Operator if you don&rsquo;t want your setter to be
invoked more than once.</p>

<p><strong>Update:</strong> I totally forgot to mention that I found out about this problem with <a href="https://twitter.com/darscan">@darscan</a> while working on <a href="http://github.com/tschneidereit/SwiftSuspenders/">Swiftsuspenders</a> and <a href="http://github.com/robotlegs/robotlegs-framework/">Robotlegs</a> code.</p>

<p><strong>The Details</strong>
I think it was <a href="twitter.com/#!/robpenner/">@robpenner</a> who coined the term
&ldquo;Mario Mushroom Operator&rdquo;.</p>

<p>In case you&rsquo;re wondering, the Mario Mushroom Operator is this: <code>||=</code>.</p>

<p>A good translation for how the MMO™ works seems to be this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='as3'><span class='line'><span class="k">if</span> <span class="o">(!</span><span class="n">field</span><span class="o">)</span> <span class="o">{</span> <span class="n">field</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span> <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>In case you&rsquo;re still wondering, here&rsquo;s how you&rsquo;d use it:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='as3'><span class='line'><span class="kd">function </span><span class="nf">useRuntimeDefault</span><span class="o">(</span><span class="n">input</span><span class="o">:</span><span class="kt">Object</span><span class="o">):</span><span class="kt">void</span> <span class="o">{</span> <span class="n">input</span>
</span><span class='line'><span class="o">||=</span> <span class="n">getDefaultValue</span><span class="o">();</span> <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>I.e., the most important use-case for the MMO™ is to apply runtime-determined
default values for method arguments.</p>

<p>Now, that&rsquo;s really useful and you might be wondering what could possibly go
wrong with that.</p>

<p>Consider this snipped of code:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='as3'><span class='line'><span class="kd">private</span> <span class="kd">var</span> <span class="n">_setOnce</span> <span class="p">:</span> <span class="kt">Boolean</span><span class="o">;</span> <span class="kd">private</span> <span class="kd">var</span> <span class="n">_value</span> <span class="p">:</span>
</span><span class='line'><span class="kt">Object</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">public</span> <span class="kd">function</span> <span class="kd">set</span> <span class="n">value</span><span class="o">(</span><span class="n">value</span> <span class="o">:</span> <span class="n">Object</span><span class="o">)</span> <span class="o">:</span> <span class="kc">void</span> <span class="o">{</span> <span class="k">if</span> <span class="o">(</span><span class="n">_setOnce</span><span class="o">)</span> <span class="o">{</span> <span class="k">throw</span> <span class="k">new</span>
</span><span class='line'><span class="kt">Error</span><span class="o">(</span><span class="s1">&#39;Value can only be set once&#39;</span><span class="o">);</span> <span class="o">}</span> <span class="n">_setOnce</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="n">_value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span> <span class="o">}</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">function</span> <span class="kd">get</span> <span class="n">value</span><span class="o">()</span> <span class="o">:</span> <span class="n">Object</span> <span class="o">{</span> <span class="k">return</span> <span class="n">_value</span><span class="o">;</span> <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Used in a class, this code encapsulates a value that can be set exactly once,
after which it can only be read.</p>

<p>With me still? Splendid.</p>

<p>In fact, you&rsquo;re probably already guessing what comes now: Using the MMO™ to
assign this once-settable value iff it hasn&rsquo;t already been set:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='as3'><span class='line'><span class="n">value</span> <span class="o">||=</span> <span class="o">{};</span>
</span></code></pre></td></tr></table></div></figure>


<p>And here, finally, things go awry. As it turns out, the MMO™&rsquo;s translation
given earlier isn&rsquo;t quite correct. Instead, the compiler (or the VM, I haven&rsquo;t
checked the bytecode) seems to translate our usage of the MMO™ to something
along the following lines:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='as3'><span class='line'><span class="n">field</span> <span class="o">=</span> <span class="n">field</span> <span class="o">?</span> <span class="n">field</span> <span class="o">:</span> <span class="o">{};</span>
</span></code></pre></td></tr></table></div></figure>


<p>In summary, instead of guarding the assignment to a field as an if statement
would do, the MMO™ only chooses between two values to use in the assignment
like the ternary operator does.</p>

<p>In case you&rsquo;re now thinking that that doesn&rsquo;t affect you because you, just as
every sane person you know, don&rsquo;t ever have use-cases for one-time assignable
fields, ask yourself whether you can be certain that all your setters are
side-effect free if you re-assign the same value and that you never, ever,
care about the overhead associated with double-setting values needlessly.
&ldquo;Yes&rdquo; and &ldquo;yes&rdquo;? Cool. &ldquo;Mmh&rdquo; and &ldquo;not sure&rdquo;: Weep with me.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2012/05/14/editing-git-commit-messages-with-sublime-text-2/">Editing Git and Mercurial Commit Messages With Sublime Text 2</a>
      </li>
    
      <li class="post">
        <a href="/2012/05/09/setting-up-cdt-to-work-on-spidermonkey/">Setting Up Eclipse CDT To Work On SpiderMonkey</a>
      </li>
    
      <li class="post">
        <a href="/2011/12/13/on-beginnings/">On Beginnings</a>
      </li>
    
      <li class="post">
        <a href="/2011/10/23/flash-cs5-and-version-control-of-binary-data-and-wasted-bandwidth/">Flash >= CS5 and version control: Of binary data and wasted bandwidth</a>
      </li>
    
      <li class="post">
        <a href="/2011/10/22/mario-mushroom-now-with-80-less-awesome/">Mario Mushroom: Now with 80% less awesome</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/tschneidereit">@tschneidereit</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'tschneidereit',
            count: 3,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("tschneidereit", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/tschneidereit" class="twitter-follow-button" data-show-count="false">Follow @tschneidereit</a>
  
</section>

<section>
  <h1>Sometimes, I speak</h1>
  <a href='http://www.fitc.ca/events/speakers/speaker.cfm?event=125&speaker_id=13275' target='_blank'><img src='/images/badges/AM12_Speaker.jpg'/></a>
  <a href='http://www.tryharder.org.uk/' target='_blank'><img src='/images/badges/i_will_try_harder.jpg'/></a>
  <a href='http://www.beyondtellerrand.com/ffk11/speakers_sessions.php#schneidereit' target='_blank'><img src='/images/badges/ffk11.png'/></a>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Till Schneidereit -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'tillschneidereit';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
